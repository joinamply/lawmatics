<script>
    window.Webflow ||= [];
    window.Webflow.push(() => {
        const $cards = $('.video-anim-card');

        $cards.each(function () {
            const $card = $(this);
            const videoEl = $card.find('.video-anim-card_video').get(0);
            // playManually is true only if attribute is exactly "true", otherwise defaults to false
            const playManually = $card.attr('play-manually') === 'true' ? true : false;
            if (!videoEl) return;

            // Always pause initially
            videoEl.pause();

            // If playManually is true, do not set up ScrollTrigger (do nothing)
            if (playManually) return;

            // Otherwise, set up ScrollTrigger to control video playback
            ScrollTrigger.create({
                trigger: $card[0],
                start: "top bottom",
                end: "bottom top",
                onEnter: () => videoEl.play(),
                onEnterBack: () => videoEl.play(),
                onLeave: () => videoEl.pause(),
                onLeaveBack: () => videoEl.pause()
            });
        });
    });
</script>